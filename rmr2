in R

install.packages( c('RJSONIO', 'itertools', 'digest', 'Rcpp', 'functional', 'plyr', 'stringr','caTools',"rJava", "dplyr", "R.methodsS3", "Hmisc"))
install.packages( c('reshape2'))

check packages have been installed
c('RJSONIO', 'itertools', 'digest', 'Rcpp', 'functional', 'plyr', 'stringr','caTools',"rJava", "dplyr", "R.methodsS3", "Hmisc",'reshape2') %in% rownames(installed.packages())

In Linux

wget https://github.com/RevolutionAnalytics/rmr2/releases/download/3.3.1/rmr2_3.3.1.tar.gz
sudo R CMD INSTALL rmr2_3.3.1.tar.gz

ln -s /opt/hadoop/contrib/streaming/hadoop-streaming-1.2.1.jar /opt/hadoop/hadoop-streaming.jar

Update the environment variables needed by rmr2

edit R_HOME/R-3.1.2/etc/Renviron

export HADOOP_HOME=/opt/hadoop/lib
export HADOOP_CONF=/opt/hadoop/conf
export HADOOP_CMD=/opt/hadoop/bin
export HADOOP_STREAMING=opt/hadoop/contrib/streaming/hadoop-streaming-1.2.1.jar
export HADOOP_STREAMING=/opt/hadoop/hadoop-streaming.jar

Sys.setenv("HADOOP_STREAMING"="/opt/hadoop/hadoop-streaming.jar")
Sys.setenv("HADOOP_CMD"="HADOOP_CMD=/opt/hadoop/bin")
To test 
echo "$PATH"
e.g. echo "$HADOOP_STREAMING"


lets test the configuration
Start services

su hduser

Run:

/opt/hadoop/bin/start-dfs.sh
/opt/hadoop/bin/start-mapred.sh

Run the jps command to checkl that all services started as supposed to:

jps


sudo R

library(rmr2)
from.dfs(to.dfs(1:100))
from.dfs(mapreduce(to.dfs(1:100)))

## copy local text file to hdfs
hadoop dfs -copyFromLocal /opt/hadoop/LICENSE.txt /license.txt

 export HADOOP_CMD=/opt/hadoop/bin
 
 
